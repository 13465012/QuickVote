$def with (domain, LI, A, Access, Editors, Coordinators)
$var title: $:domain
$var loggedIn: $:LI

$if A:
	<div class="row">
		<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Admin options for $:domain</h3>
				</div>
				<div class="panel-body">
					<div class="col-md-12">
						<div class="form-group">

							<label for="Username">
								Domain Name
							</label>
							<input type="text" class="form-control" name="Username" id="username" placeholder="Enter New Domain Name" value="$:domain"/>
						</div>
						<button type="button" class="btn btn-default" id="Submit">
								Save
						</button>

				</div>
			</div>
		</div>
	</div>
$if LI:
	<div class="row">
    <div class="panel panel-default">
        <div class="panel-heading">
        	<h3 class="panel-title">Editor options for $:domain</h3>
        </div>
        <div class="panel-body">
					<div class="col-md-12">
						<div class="form-group">
							<a class="domain" href="/$:domain/editor">Edit Domain Questions</a>
							<a class="domain" href="/$:domain/view">View Active Question</a>
							<a class="domain" href="/$:domain/history">Review Past Votes</a>
						</div>
				</div>
			</div>
		</div>
	</div>
$if A or Access == "Coord":
	<div class="row">
		<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Manage Users for $:domain</h3>
				</div>
				<div class="panel-body">
					<div class="col-md-12">


						<div class="form-group">

							<label for="Username">
								Users with Editor Permissions
							</label>
							<div class="form-group">

									<form id="editor-usr">

									</form>
									<script>
										var unique_id_number = -1;

										function CreateId(start) {
											unique_id_number++;
											return start + unique_id_number
										}

										// list of editors from db
										var editors = [
											$if Editors != None:
												$for i in Editors:
													"$:i",
											""
										];

										/* Send usr list to server */
										function CoordSendUsrs() {
											var eles = $$("#editor-usr").children();
											data = "";
											// all inputs except the empty end input
											for (var i = 0; i < eles.length-1; i++) {
												if (i != 0) {
													data += "&";
												}
												data += i+"="+ eles[i].value;
											}
											$$.ajax({
											type: "POST",
											data: data,
											url:	"/$:domain/manage/update",
											success: function(reply) {
													$$("#reply").fadeOut("slow",
														$$("#reply").text(reply,
															$$("#reply").fadeIn("slow")
														)
													);
													return;
												}
												//$$("#reply").text(reply);

										});
									}
										/* Check state of input in list*/
										function EditList() {
											// check content of children of usr list
											var eles = $$("#editor-usr").children();
											for (var i = 0; i < eles.length; i++) {
												// delete empty inputs if not last element
												if (eles[i].value == "" && i != eles.length - 1) {
													$$("#"+eles[i].id).fadeOut("slow" ,$$("#"+eles[i].id).remove());
												}
												// add new input if last element is not empty
												if (i == eles.length - 1 && eles[i].value != "") {
													InsertListInput("");
												}
											}
										}

										function InsertListInput(value) {
											var id = CreateId("usr");
											$$('#editor-usr').append($$("<input id=\""+id+"\" onkeyup=\"EditList();\" style=\"margin-top:5px;\" class=\"names form-control\" placeholder=\"Enter Userame\" value=\""+value+"\"/>").hide().fadeIn("slow"));
										}
										// output list when ready
										$$("document").ready(function() {

											for(var i = 0; i < editors.length; i++) {
												InsertListInput(editors[i]);
											}
										});

									</script>
							</div>
							<button type="button" class="btn btn-primary" onclick="CoordSendUsrs();">
									Submit Changes
							</button>
						</div>



				</div>
			</div>
			<p id="reply"></p>
		</div>

	</div>
	<script>
		$$("#Submit").click(submit);
		$$("#password").keydown(function(event) {
			if (event.which == 13) {
				submit();
			}
		});
		$$("#username").keydown(function(event) {
			if (event.which == 13) {
				submit();
			}
		});
		function submit() {
			var data = $$("#loginform").serialize();
			$$.ajax({
			type: "POST",
			data: data,
			success: function(reply) {
				if (reply == "Success") {
					location.assign('/');
					return
				}
				$$("#reply").text(reply);


			}
			});
			return false;
		}
	</script>
